# üîê KMS Verification Report

**Status:** ‚ùå FAILED
**Timestamp:** Sun, 02 Nov 2025 13:09:18 GMT
**Worker Hash:** d5333940
**Workflow Run:** [View Details](https://github.com/Lukium/ats-kms-enclave/actions/runs/19012739063)

---

## Verification Results

### ‚úÖ Manifest Fetch

Manifest fetched (v2.0.0)

### ‚úÖ Worker Hash

Worker hash matches manifest

**Expected Hash:**
```
d53339403d36cd9c58a896e0c1c856213e0c6ef9e3979d281564eccc18171423
```

**Actual Hash:**
```
d53339403d36cd9c58a896e0c1c856213e0c6ef9e3979d281564eccc18171423
```

**Source:** https://kms.ats.run/kms-worker.d5333940.js

### ‚úÖ SRI Hashes

All SRI hashes verified

#### client.js ‚úÖ

**Expected SRI:**
```
sha384-cV4zp9lzGeo/98Aonvi8UB0Jr01Qt6Sx1JK6MVw5TZnPmbr6F+bDbtV5cFBprqqR
```

**Actual SRI:**
```
sha384-cV4zp9lzGeo/98Aonvi8UB0Jr01Qt6Sx1JK6MVw5TZnPmbr6F+bDbtV5cFBprqqR
```

**Source:** https://kms.ats.run/enclave-client.js

#### enclave.css ‚úÖ

**Expected SRI:**
```
sha384-0m6H57PFrArZ+cnrslj5TL4eTidgfi8RMA9WwzXfg/mMJ1AEenTpxckR7C6y/DxQ
```

**Actual SRI:**
```
sha384-0m6H57PFrArZ+cnrslj5TL4eTidgfi8RMA9WwzXfg/mMJ1AEenTpxckR7C6y/DxQ
```

**Source:** https://kms.ats.run/enclave.css

### ‚úÖ Allowed List

Current version is in allowed list

**Current Hash:** `d53339403d36cd9c58a896e0c1c856213e0c6ef9e3979d281564eccc18171423`

**Allowed Hashes:**
- `d53339403d36cd9c58a896e0c1c856213e0c6ef9e3979d281564eccc18171423`

### ‚úÖ Security Headers

All headers verified

#### content-security-policy ‚úÖ

**Expected:** `default-src 'none'; script-src 'self'; style-src 'self'; img-src 'self'; connect-src 'self'; worker-src 'self'; object-src 'none'; base-uri 'none'; frame-ancestors https://alpha.allthe.services https://beta.allthe.services https://allthe.services https://phase2-demo.allthe.services http://localhost:5173; form-action 'none'`

**Actual:** ‚úÖ Matches

**Frame Ancestors Explanation:**
The `frame-ancestors` directive controls which origins can embed the KMS enclave in an iframe:

- `https://alpha.allthe.services` - Development build of the AllTheServices app
- `https://beta.allthe.services` - Beta build (not yet available)
- `https://allthe.services` - Production build (not yet available)
- `https://phase2-demo.allthe.services` - Demo for the KMS enclave itself
- `http://localhost:5173` - Local development counterpart of the dev build

#### permissions-policy ‚úÖ

**Expected:** `accelerometer=(), ambient-light-sensor=(), autoplay=(), battery=(), bluetooth=(), camera=(), display-capture=(), document-domain=(), encrypted-media=(), fullscreen=(), geolocation=(), gyroscope=(), hid=(), idle-detection=(), magnetometer=(), microphone=(), midi=(), payment=(), picture-in-picture=(), screen-wake-lock=(), serial=(), speaker-selection=(), sync-xhr=(), usb=(), web-share=(), xr-spatial-tracking=()`

**Actual:** ‚úÖ Matches

#### x-content-type-options ‚úÖ

**Expected:** `nosniff`

**Actual:** ‚úÖ Matches

#### referrer-policy ‚úÖ

**Expected:** `no-referrer`

**Actual:** ‚úÖ Matches

#### cross-origin-opener-policy ‚úÖ

**Expected:** `(not present)`

**Actual:** ‚úÖ Matches

#### cross-origin-embedder-policy ‚úÖ

**Expected:** `(not present)`

**Actual:** ‚úÖ Matches

### ‚ùå Verification

Cannot read properties of undefined (reading 'substring')


---

## Manifest Details


- **Version:** 2.0.0
- **Build Time:** Sun, 02 Nov 2025 12:56:16 GMT
- **Reproducible:** Yes
- **Environment:** production

### Files
- **Worker:** `kms-worker.d5333940.js`
  - SHA-256: `d53339403d36cd9c58a896e0c1c856213e0c6ef9e3979d281564eccc18171423`
  - SRI: `sha384-LJMBIUTUBN5Bw1gP568W9RtdESjNcdpo/EQyzDUuumOeVZj59mlvJgKYKOGQrDM3`

- **Client JS:** `enclave-client.js`
  - SRI: `sha384-cV4zp9lzGeo/98Aonvi8UB0Jr01Qt6Sx1JK6MVw5TZnPmbr6F+bDbtV5cFBprqqR`

- **CSS:** `enclave.css`
  - SRI: `sha384-0m6H57PFrArZ+cnrslj5TL4eTidgfi8RMA9WwzXfg/mMJ1AEenTpxckR7C6y/DxQ`

### Allowed Versions
- `d5333940...`


---

## About This Report

This report is automatically generated by the [KMS Verifier](https://github.com/lukium/ats-kms/tree/verifier).

The verifier runs approximately **4 times per day** at random times to check that the deployed KMS enclave matches the published manifest and security specifications.

### What Gets Verified:
1. Manifest integrity and structure
2. Worker hash matches deployed version
3. SRI (Subresource Integrity) hashes for all resources
4. Security headers (CSP, Permissions-Policy, etc.)
5. Current version is in allowed list
6. [Future] Rekor transparency log attestation

### Trust Model:
- **Verifier Code:** Frozen and auditable at specific commit
- **This Report:** Auto-generated, constantly updated
- **Badge:** Links to this report for transparency

---

*Last updated: Sun, 02 Nov 2025 13:09:18 GMT*
*Verifier: [github.com/lukium/ats-kms/tree/verifier](https://github.com/lukium/ats-kms/tree/verifier)*

